<!-- 
　日付：2021/04/04
　目的：onbizを使用して、ボタンが押されたら、ブラウザにONと表示するプログラム
　概要： 接続時：有るよ～
        未接続時：ナッシン
        とブラウザに表示する。
        1番ピン：マヨネーズ
        2番ピン：ケチャップ
        3番ピン：金のゴマダレ
        4番ピン：カップ麺
        があるかどうかを監視する。
-->

<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script
      src="https://unpkg.com/obniz@3.x/obniz.js"
      crossorigin="anonymous"
    ></script>

    <!-- JQuaryの追加 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- CSSの設定 -->
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="obniz-debug"></div>
    <div class="container">
      <div class="text-center">
        <h1>オブストゥ</h1>
        <h3>offline</h3>
        <h3>マヨネーズ： <span id="num_1">あるかどうかを表示するよ。</span></h3>
        <h3>ケチャップ： <span id="num_2">あるかどうかを表示するよ。</span></h3>
        <h3>ゴマダレ： <span id="num_3">あるかどうかを表示するよ。</span></h3>
        <h3>カップ麺： <span id="num_4">あるかどうかを表示するよ。</span></h3>
      </div>
    </div>

    <script>
      //put your obniz ID
      var obniz = new Obniz("OBNIZ_ID_HERE");

      //during obniz connection
      obniz.onconnect = async function () {
        //buttonを押したときの動作
        //0と1,0と2,0と3,0と4の接続
        var button1 = obniz.wired("Button", { signal: 1, gnd: 0 });
        var button2 = obniz.wired("Button", { signal: 2, gnd: 0 });
        var button3 = obniz.wired("Button", { signal: 3, gnd: 0 });
        var button4 = obniz.wired("Button", { signal: 4, gnd: 0 });

        // id：.htmlのnum_1を取得し、num1に格納する。
        var num1 = document.getElementById("num_1");
        var num2 = document.getElementById("num_2");
        var num3 = document.getElementById("num_3");
        var num4 = document.getElementById("num_4");

        button1.onchange = function (pressed) {
          // pressedをコンソールに表示
          console.log("pressed1:" + pressed);
          // pressedが押されている場合
          if (pressed === true) {
            // testに"on"を表示する。
            num1.innerHTML = "on";
            // pressedが押されてない場合
          } else if (pressed === false) {
            // testに"off"を表示する。
            num1.innerHTML = "off";
          }
        };
      };
    </script>
  </body>
</html>
